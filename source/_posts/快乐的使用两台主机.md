---
title: 快乐的使用两台主机
date: 2022-10-20 15:05:08
tags: [双主机, PC, Mac Air]
categories: [分享，感受]
---

今年四月份买了一台 Mac Air 后，就在思考要怎么快乐的同时用两台主机玩耍

<!-- more -->

> 今年四月份，饱含着期盼——斥巨资买回一台 M1 Mac Air，老实讲，这是我觉得买电子产品最值得的一回。

无风扇设计，一体式机身，镜面 Retina 屏幕，超好用的触摸板，还有出色的续航以及性能都让我爱不释手，除了打游戏以外的事情基本都拿它来做了。
但有个问题就是屏幕虽好，太小。触摸板虽好用，但在家还是键盘鼠标更方便。所以就想整一套同时用上两个主机，并且共享连接设备的方法。

## 想法

在公司时，我使用一个扩展坞连上所有设备，然后使用 RDP 连接工作的 PC。这个方法很通用，便捷。但体验很烂，电源线需要一直插在笔记本上，RDP 连接工作 PC 的时候，感觉像在用老爷机。而且黑屏后，RDP 有概率断连，所以这个方法在家里用肯定是要不得的，，，

然后我当时有两台显示器，一台 2K 144（打游戏用的，但买来后几乎吃灰半年）、一台 4K 60 做主显示器，一台 DAC 、两耳机、键盘、鼠标。
思考后想到，主显示器可以连 PC 也可以连 Mac，副显示器一直连 PC，但在使用 Mac 时，鼠标从主显示器移到副显示器就能控制 PC，并且共享设备。

第一版的方案如下图

![方案一](https://unpkg.com/xfb/img/new/fa1.png)

后面觉得这个方案要手动按一下切换按钮，太麻烦所以搜了下。发现一个叫 USB 对拷线的玩意，把 KVM 换成了对拷线。然后因为懒癌、主显示器也不带 Type—C、2K 显示器显示效果不太行，需要换一个主显示器，所以一切都拖到了最近才开始动手。

## 更换设备

前面说了 2K 144 本来是打游戏用的，但已吃灰半年，做副屏显示又不太爽，所以卖掉后换了一台主显示器。原来的主显示器做副屏用。

### DELL U2723QE

经过我几天的挑挑拣拣，选定了这台 DELL 的高级货：4K 60HZ、自带 KVM、接口繁多，简直就是一个扩展坞、带 DP out，可以菊花链、IPS BLACK 面板，2000:1 对比度，400 尼特亮度，不能用的 HDR，价格 3300（小雪人的店）。

经过几天快递终于到手，开箱后接上电和线缆，亮屏后就让我眼前一黑。什么几把破屏幕，色差也太大了，整个屏幕像是覆盖了一层绿膜。先不说和 Mac 比，就连咱 1100 买的破辣鸡也没有这么离谱，想到可能是广色域的问题，调成 sRGB 模式也是没什么卵用，在自定义模式下调 RGB 倒是勉强能用了，但是辣鸡 Bugdows 不支持广色域，颜色会过饱和，心情不好了，直接退货。

### LG 27UP850N-W

再经过几天的挑选，发现这个破显示器市场真的都在摆烂，几年时间就弄出些 nano-ips、fast-ips 之类的玩意，价格还贵。不仅贵，2500 往上功能稍微多点的，几乎都是广色域屏幕，虽说各类厂家为了这个问题做了色域缩限，比如之前说的 sRGB 模式，但基本没什么用，色差辣鸡，`Delta E` 根据群友所说高的有 5-6，低得也有 2-3，直接无语。有条件建议直接买电视机（比如 LG 那台 42 寸的 OLED ）。

但我这边一个是环境不允许，另一面囊中羞涩，所以最后买了 LG 这台显示器，京东自营打折 2599，赶巧了。

到手后发现发绿应该是广色域的通病，切到 sRGB 模式后倒是能看了。然后 LG 有个好处是换了模式也可以有很多画面选项可以调，试了几下不仔细看和 Mac 差不多了，这下知足了。（后续买了校色仪）

## 开始折腾

买对拷线之前有位群友告诉了我一个开源破车的解决方案，真好，不用钱就能解决问题。
所以打算先试试不要钱的。

### Barrier

开源的破车叫 [Barrier](https://github.com/debauchee/barrier/) 是从一个以前免费现在收费的软件 Synergy fork 出来的。

下载安装，界面很简单。在局域网网的话可以自动搜到对应的客户端，拖动一下添加就行了，然后就踩到一个坑。
搜是搜到了，但是死活连不上，看到有个日志功能，点进去有个关键词 ssl。去 issue 里搜了下，这是 [解决办法](https://github.com/debauchee/barrier/issues/231)。

简单使用了下，真棒啊。主显示器连 Mac，副显示器连 Windows，鼠标移到哪个屏幕就控制那台主机。但还是有些问题，在设置里会突然卡成狗，关掉又恢复正常。偶尔会鼠标漂移，可能是因为 Mac 连的 WIFI 偶尔会有网络波动。LinearMouse 无法识别到鼠标，所以不能去掉 macOS 的傻逼鼠标加速，太难受了。大部分情况下还是体验很好的，哪天心血来潮了可能会买个对拷线来试下。

### AudioRelay

Barrier 只解决了鼠标键盘共享的问题，还有一个很重要的音频声音需要共享，不然耳机连 Windows 使用 Mac 时，声音却从 Mac 的扬声器里传出来，太尴尬了，，，

经过一番查找发现一个很强大的神器叫 voicemeeter，完美解决我的需求——但是没有 macOS 的版本。本来该有的，我看他们官方推特上说 21 年底会出，但是到现在也没有想来是咕咕咕了。重新找了个叫 [AudioRelay](https://audiorelay.net) 的玩意，界面也很简单，方便设置。macOS 设置为服务端，Windows 设置为播放端，可以自动搜索到服务端，然后连上就万事大吉。

最后折腾出来的方案是这样

![最后的方案](https://unpkg.com/xfb/img/new/fa2.png)
