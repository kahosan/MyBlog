const nowMode="nowMode",darkStyle="/css/style-dark.css",darkModeToggleBottonElement=document.getElementById("darkmode"),getModeFromSystem=()=>window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light",getDarkStyleIsExist=()=>document.getElementById("dark"),setLS=(e,t)=>{try{localStorage.setItem(e,t)}catch(e){}},removeLS=e=>{try{localStorage.removeItem(e)}catch(e){}},getLS=e=>{try{return localStorage.getItem(e)}catch(e){return null}},inverMode={dark:"light",light:"dark"},validColorModeKeys={dark:!0,light:!0},addDarkMode=()=>{linkTag=document.createElement("link"),linkTag.id="dark",linkTag.href=darkStyle,linkTag.setAttribute("rel","stylesheet"),document.head.appendChild(linkTag)},deleteDarkMode=()=>{getDarkStyleIsExist().remove()},applyCustomdDarkMode=e=>{e=e||getLS(nowMode);"light"!==e||getDarkStyleIsExist()?"dark"===e&&getDarkStyleIsExist()&&deleteDarkMode():addDarkMode()},toggleMode=()=>{let e=getLS(nowMode);if(validColorModeKeys[e])e=inverMode[e];else{if(null!==e)return;e=inverMode[getModeFromSystem()]}return setLS(nowMode,e),e};applyCustomdDarkMode(),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",e=>{e.matches?getDarkStyleIsExist()||(addDarkMode(),setLS(nowMode,"light")):getDarkStyleIsExist()&&(deleteDarkMode(),setLS(nowMode,"dark"))});